# 資料庫實現狀態記錄

## 最後更新: 2024年4月9日

## 當前狀態概述

目前專案處於早期開發階段，根據開發進度和優先級評估，我們採取了**分階段實現**的策略，僅將核心用戶相關的資料表實際部署到 Neon PostgreSQL 資料庫，其他功能模塊暫時使用前端模擬資料進行開發。

## 已實現的數據表

以下資料表已完成設計並部署到資料庫:

1. **users** (用戶核心資訊)
   - 基本用戶資料、認證資訊、角色設定
   - 支持多租戶架構 (activity_id)

2. **userProfiles** (用戶擴展資訊)
   - 與 users 表 1:1 關聯
   - 存儲個人簡介、聯絡資訊等擴展資料

3. **userSettings** (用戶偏好設定)
   - 與 users 表 1:1 關聯
   - 管理通知、主題等個人化設定

4. **events** (活動資訊)
   - 基本活動資料，包括時間、地點、狀態等
   - 多租戶支持 (activity_id)

5. **savedEvents** & **followedEvents** (用戶-活動關聯)
   - 用戶收藏和關注活動的關聯表
   - 使用複合主鍵和外鍵確保資料完整性

## 已設計但暫未實現的資料表

以下資料表已完成設計，但暫未部署到資料庫:

1. **sponsorshipPlans** (贊助計劃)
   - 已完成設計，但暫未部署到資料庫
   - 目前使用 `src/lib/mocks/sponsorships.ts` 中的模擬資料

## 下一步計劃

1. **完善用戶相關功能**
   - 優先確保用戶認證、個人資料和設置功能穩定運行

2. **準備活動資料表遷移**
   - 隨著活動功能開發完善，將模擬資料遷移至資料庫

3. **準備贊助計劃資料表遷移**
   - 待贊助相關功能較為完善後實現

## 技術堆棧提醒

- 使用 **Neon PostgreSQL** 作為資料庫服務
- 使用 **Drizzle ORM** 進行資料庫操作
- 所有資料表設計均支持多租戶架構 (使用 activity_id 欄位)
- 已設定權限控制，確保資料安全與隔離

## 相關指令參考

```bash
# 將資料表結構推送到資料庫
npm run db:push

# 填充初始測試資料
npm run db:seed

# 啟動 Drizzle Studio 查看資料
npm run db:studio
``` 